--- ncbi-vdb/libs/kapp/CMakeLists.txt.orig	2023-08-07 19:50:55 UTC
+++ ncbi-vdb/libs/kapp/CMakeLists.txt
@@ -23,12 +23,16 @@
 # ===========================================================================
 
 set ( UNIX_SRC unix/args-conv-os.c unix/sysmain.c )
+# Must patch hw.memsize -> hw.usermem
+set ( FREEBSD_SRC ${UNIX_SRC} mac/ram.c )
 set ( LINUX_SRC ${UNIX_SRC} linux/ram.c )
 set ( MAC_SRC ${UNIX_SRC} mac/ram.c )
 set ( WIN_SRC win/args-conv-os.c win/ram.c win/sysmain.c )
 
 if ( "windows" STREQUAL ${OS} )
     set ( OS_SPECIFIC_SRC ${WIN_SRC} )
+elseif( "freebsd" STREQUAL ${OS} )
+    set ( OS_SPECIFIC_SRC ${FREEBSD_SRC} )
 elseif( "linux" STREQUAL ${OS} )
     set ( OS_SPECIFIC_SRC ${LINUX_SRC} )
 elseif( "mac" STREQUAL ${OS} )
